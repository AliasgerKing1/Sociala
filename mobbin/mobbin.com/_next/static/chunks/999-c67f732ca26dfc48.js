"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{74116:function(e,n,t){t.d(n,{I:function(){return s}});var r=t(26042),o=t(69396),i=t(85893);function s(e){return(0,i.jsxs)("svg",(0,o.Z)((0,r.Z)({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor"},e),{children:[(0,i.jsx)("path",{d:"M12.6667 2.66667H3.33333C2.59695 2.66667 2 3.26363 2 4.00001V13.3333C2 14.0697 2.59695 14.6667 3.33333 14.6667H12.6667C13.403 14.6667 14 14.0697 14 13.3333V4.00001C14 3.26363 13.403 2.66667 12.6667 2.66667Z",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M10.667 1.33333V2.33333",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M5.33301 1.33333V2.33333",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M2 6.66667H14",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}))}},87441:function(e,n,t){t.d(n,{c:function(){return f},A:function(){return C}});var r=t(47568),o=t(34051),i=t.n(o),s=t(67294),c=t(31473),l=t(66308),a=t(10166),u=t(53334),d=t(38904),p=t(49981);function f(e){var n,t=e.flowId,o=(0,a.dO)(),f=(0,c.Ps)(),h=C(t,{enabled:!1}),x=(0,s.useCallback)((function(){return Promise.resolve(null!==(n=h.data)&&void 0!==n?n:h.refetch().then((function(e){return e.data}))).then((function(e){if(!e)throw Error("Invariant violation: Flow version app query must succeed.");return e}))}),[h]);return{downloadScreensFromFlow:function(){o.invokeIfAllowed({intent:"download_screens_from_flow",requires:"authentication",callbackToInvoke:(0,r.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.aX.track("Flow Screens Downloaded",{flow_id:t}),n=f.toastLoading({message:"Downloading screens..."}),e.next=4,x();case 4:return r=e.sent,e.next=7,(0,u.uv)(r.appSectionScreens.map((function(e){return{imageUrl:e.appScreen.screenUrl}})),"".concat(r.appVersion.app.appName," ").concat((0,p.w$)(r.appVersion.app.platform)," ").concat(r.name)).then((function(){return n.resolveWithSuccess({message:"Downloaded screens!"})})).catch(n.resolveWithError);case 7:case"end":return e.stop()}}),e)})))})},copyScreensFromFlow:function(){o.invokeIfAllowed({intent:"copy_screens_from_flow",requires:"authentication",callbackToInvoke:(0,r.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.aX.track("Flow Screens Copied",{flow_id:t}),n=f.toastLoading({message:"Copying screens as PNG..."}),e.next=4,(0,u.N0)(x().then((function(e){return e.appSectionScreens.map((function(e){return{imageUrl:e.appScreen.screenUrl}}))}))).then((function(){return n.resolveWithSuccess({message:"Copied flow screens to clipboard!"})})).catch(n.resolveWithError);case 4:case"end":return e.stop()}}),e)})))})},copyFlowLink:function(){l.aX.track("Flow Link Copied",{flow_id:t}),navigator.clipboard.writeText((0,d.w)("/flows/".concat(t))).then((function(){return f.toast({badge:"success",message:"Copied flow link to clipboard!"})}))}}}var h=t(59637),x=t(29815),v=t(88767),m=t(52816),w=t(79523),g=t(20506),j=["id","name"],y=["hotspotX","hotspotY","hotspotWidth","hotspotType","hotspotHeight"],b=["screenNumber","screenUrl"],k=["id","appName","platform"];function I(e){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.r)(w._m.from("app_sections").select("\n        ".concat(j.join(","),",\n        appSectionScreens:app_section_screens(\n          ").concat(y.join(","),",\n          appScreen:app_screens(\n            ").concat(b.join(","),"\n          )\n        ),\n        appVersion:app_versions!app_sections_appVersionId_fkey(\n          app:apps(\n            ").concat(k.join(","),"\n          )\n        )\n      ")).eq("id",n).order("order",{foreignTable:"app_section_screens",ascending:!0}).single()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,n){return(0,v.useQuery)((0,m.j)(["apps","app_versions","app_screens","app_section_screens","app_sections"],"FlowActionsDropdownMenuButton",e),(function(e){var n=(0,h.Z)(e.queryKey).slice(2);return I.apply(void 0,(0,x.Z)(n))}),n)}},36384:function(e,n,t){t.d(n,{y:function(){return a}});var r=t(85893),o=(t(67294),t(41664)),i=t.n(o),s=t(11163),c=t(60666),l=t(10166);function a(e){var n=e.text,t=e.href,o=e.intent,a=(0,l.dO)(),u=(0,s.useRouter)();return(0,r.jsx)(i(),{passHref:!0,href:t,children:(0,r.jsx)(c.V,{link:!0===a.isAuthenticated,text:n,onClick:function(e){var n=e.metaKey||e.ctrlKey;!0===n&&!0===a.isAuthenticated||e.preventDefault(),a.invokeIfAllowed({intent:o,requires:"authentication",callbackToInvoke:function(){!0!==n&&u.push(t,void 0,{shallow:!0})}})}})})}},65765:function(e,n,t){t.d(n,{B:function(){return p}});var r=t(85893),o=t(47562),i=t(83385),s=t(65927),c=t(80617),l=t(52279),a=t(36138),u=t(41661),d=t(87441);function p(e){var n=e.flowId,t=e.onRemove,p=e.onOpenChange,f=e.tooltipSide,h=void 0===f?"top":f,x=e.intent,v=void 0===x?"secondary":x,m=e.large,w=(0,d.c)({flowId:n});return(0,r.jsxs)(i.h_,{onOpenChange:function(e){null===p||void 0===p||p(e)},children:[(0,r.jsx)(i.$F,{children:(0,r.jsx)(s.u,{text:"Download & share",side:h,children:(0,r.jsx)(o.z,{icon:a.n,intent:v,large:m})})}),(0,r.jsx)(i.AW,{width:240,align:"end",children:(0,r.jsxs)(i.Qk,{children:[(0,r.jsx)(i.Xi,{icon:c._,onSelect:w.downloadScreensFromFlow,children:"Download screens as PNG"}),(0,r.jsx)(i.Xi,{icon:l.x,onSelect:w.copyFlowLink,children:"Copy flow link"}),t?(0,r.jsx)(i.Xi,{icon:u.X,onSelect:t,intent:"destructive",children:"Remove from collection"}):null]})})]})}},62916:function(e,n,t){t.d(n,{Jt:function(){return p},_k:function(){return g},KK:function(){return Z},sl:function(){return B}});var r=t(85893),o=t(76926),i=t(51438),s=t(28668),c=t(25892),l=t(76166),a=t(67294),u=function(e){(0,s.Z)(t,e);var n=(0,l.Z)(t);function t(){return(0,i.Z)(this,t),n.call(this,"Developer Error: FlowDetailContext not declared!")}return t}((0,c.Z)(Error)),d=(0,a.createContext)({get flowId(){throw new u},get platform(){throw new u},get isInspectorOpen(){throw new u},setIsInspectorOpen:function(e){throw new u}});function p(e){var n=e.children,t=e.flowId,i=e.platform,s=e.isInspectorOpen,c=e.onIsInspectorOpenChange,l=e.next,a=e.prev;return(0,o.aL)(["ArrowLeft","ArrowRight","mod+\\"],(function(e,n){switch(n){case"ArrowLeft":var t;null===a||void 0===a||null===(t=a.onNavigate)||void 0===t||t.call(a);break;case"ArrowRight":var r;null===l||void 0===l||null===(r=l.onNavigate)||void 0===r||r.call(l);break;case"mod+\\":c(!s)}})),(0,r.jsx)(d.Provider,{value:{flowId:t,platform:i,isInspectorOpen:s,setIsInspectorOpen:c},children:(0,r.jsx)("section",{className:"grid h-full w-full grid-cols-1 grid-rows-[calc(100%-60px)] min-720:grid-rows-[100%]",children:n})})}var f=t(47562),h=t(65927),x=t(14795),v=t(87587),m=t(65765),w=t(98192);function g(e){var n=(0,a.useContext)(d),t="header"===e.variant?e.isInspectorOpen:n.isInspectorOpen,i="header"===e.variant?e.onIsInspectorOpenChange:n.setIsInspectorOpen,s="header"===e.variant?e.flowId:n.flowId,c="header"===e.variant?e.platform:n.platform,l=(0,v.VQ)();return"footer"===e.variant?(0,r.jsxs)("div",{className:"grid grid-flow-col content-center justify-evenly gap-12 py-8 min-720:hidden",children:[(0,r.jsx)(v.GN,{align:"end",contentType:"flow",onSelectCollection:l({appFlowIds:[s],platform:c}),intent:"minimal",variant:"icon_only",large:!0}),(0,r.jsx)(h.u,{text:"".concat(t?"Close":"Open"," Inspector"),children:(0,r.jsx)(f.z,{pressed:t,intent:"minimal",large:!0,icon:x.W,onClick:function(){return i(!t)}})}),(0,r.jsx)(m.B,{flowId:s,intent:"minimal",large:!0})]}):(0,r.jsxs)("div",{className:"hidden grid-flow-col gap-12 min-720:grid",children:[(0,r.jsxs)("div",{className:"flex gap-x-8",children:[(0,r.jsx)(w.i,{flowId:s,tooltipSide:"bottom"}),(0,r.jsx)(v.GN,{tooltipSide:"bottom",contentType:"flow",onSelectCollection:l({appFlowIds:[s],platform:c}),variant:"icon_only",intent:"secondary"}),(0,r.jsx)(m.B,{flowId:s,tooltipSide:"bottom"})]}),(0,r.jsx)("div",{className:"h-36 w-[2px] bg-gray-100 py-8"}),(0,r.jsx)(h.u,{text:"".concat(t?"Close":"Open"," Inspector"),keys:[o.nl.Primary,"\\"],align:"end",side:"bottom",children:(0,r.jsx)(f.z,{pressed:t,intent:"minimal",icon:x.W,onClick:function(){return i(!t)}})})]})}var j=t(99534),y=t(11428),b=t(8336),k=t(26042),I=t(69396),_=t(10166),C=t(31516),N=t(18740),S=t(81931),F=t(54943);function O(e){var n=e.hotspot,t=e.screenUrl,o=(0,y._C)(),i=(0,a.useContext)(d),s=(0,_.dO)(),c=(0,C.f)(),l=(0,a.useRef)(null),u=(0,a.useState)(0),p=u[0],f=u[1];(0,a.useEffect)((function(){var e=function(){l.current&&p!==l.current.clientHeight&&f(l.current.clientHeight)},n=new ResizeObserver(e);return l.current&&(null===n||void 0===n||n.observe(l.current),e()),function(){return null===n||void 0===n?void 0:n.disconnect()}}),[l,p,f]);var h=(0,a.useMemo)((function(){return p*("web"===i.platform?F.YB:F.rM)}),[p,i.platform]);return(0,r.jsx)("div",{ref:l,className:(0,b.A)("flex h-full items-center"),children:(0,r.jsxs)("div",{className:"relative flex shadow-[0_0_2px_rgba(0,0,0,0.2)]",style:{height:o>720||"web"!==i.platform?p:void 0,width:o>720||"web"!==i.platform?h:"70vw"},children:[(0,r.jsx)("img",(0,I.Z)((0,k.Z)({onContextMenu:function(e){!0!==s.isMembershipSubscriber&&e.preventDefault()}},(0,N.V)(t,c?{}:{width:S.Zi})),{className:"grow object-fill",alt:null===n||void 0===n?void 0:n.hotspotType})),void 0!==n&&"number"===typeof n.hotspotY&&"number"===typeof n.hotspotX&&"number"===typeof n.hotspotWidth&&"number"===typeof n.hotspotHeight&&(0,r.jsx)("div",{className:"absolute h-48 w-48 border-2 border-blue-200 bg-blue-100/80",style:{top:"".concat(100*n.hotspotY,"%"),left:"".concat(100*n.hotspotX,"%"),width:"".concat(100*n.hotspotWidth,"%"),height:"".concat(100*n.hotspotHeight,"%")}})]})})}function Z(e){var n=e.children,t=e.flowScreens,o=e.onFlowClick,i=e.scrollToScreenIndex,s=(0,y._C)(),c=(0,a.useContext)(d),l=(0,a.useState)(!0),u=l[0],p=l[1],h=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=requestAnimationFrame((function(){var e=h.current;if(e)if("number"===typeof i){var n=e.children.item(i);n&&e.scroll({left:n.getBoundingClientRect().left+n.clientWidth/2-e.offsetWidth/2})}else e.scroll({left:0})}));return function(){return cancelAnimationFrame(e)}}),[t,i]);var x=t.some((function(e){return"string"===typeof e.hotspotType||"number"===typeof e.hotspotHeight||"number"===typeof e.hotspotWidth||"number"===typeof e.hotspotX||"number"===typeof e.hotspotY}));return(0,r.jsxs)("div",{className:"flex flex-row items-stretch bg-[#E5E5E5]",children:[(0,r.jsxs)("div",{className:"relative grow overflow-x-hidden",children:[(0,r.jsx)("ol",{ref:h,className:(0,b.A)("flex h-full w-full flex-row min-720:items-stretch","gap-24 px-24 pt-40 pb-[90px] min-720:gap-40 min-720:px-40","scrollbar-none overflow-x-auto","web"===c.platform&&"items-center",o&&"cursor-zoom-out"),onClick:o,children:t.map((function(e,n){var t=e.screenUrl,o=e.order,c=(0,j.Z)(e,["screenUrl","order"]);return(0,r.jsxs)("li",{className:"relative grid cursor-auto grid-rows-[calc(100%-16px-20px),20px] gap-16 min-720:cursor-zoom-out",onClick:function(e){return s<720&&e.stopPropagation()},children:[(0,r.jsx)(O,{hotspot:u?c:void 0,screenUrl:t,highlight:n===i}),(0,r.jsx)("h2",{className:"text-center text-16",children:c.hotspotType})]},o)}))}),(0,r.jsx)("div",{className:"absolute bottom-24 left-0 right-0 flex flex-row justify-center",children:(0,r.jsx)(f.z,{intent:"primary",onClick:function(){return p((function(e){return!e}))},disabled:!x,children:x?u?"Hide hotspots":"Show hotspots":"No hotspots available"})})]}),n]})}var A=t(68448),M=t(45640),L=t(29815),W=t(34850),z=t(76665),D=t(74116),T=t(31268),E=t(11410),H=t(56205),P=t(44235),U=t(36384),V=t(56611),X=t(49981);function R(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=V.lh.apply(void 0,(0,L.Z)(n));return new URLSearchParams("string"===typeof r?{filter:r}:[]).toString()}function q(e){var n=e.publishedAt,t=e.actions,o=e.name,i=e.queryOnUrl,s=(0,P.xT)(),c=(0,a.useContext)(d),l=t.filter((function(e){var n;return null===s||void 0===s||null===(n=s.flowActions)||void 0===n?void 0:n.has(e)}));return(0,r.jsxs)(z.lj,{children:[(0,r.jsxs)(z.vz,{children:[(0,r.jsx)(z.iF,{icon:E.v,children:"Platform"}),(0,r.jsx)(z.vM,{children:(0,r.jsx)("p",{className:"py-8 text-14",children:(0,X.w$)(c.platform)})})]}),(0,r.jsxs)(z.vz,{children:[(0,r.jsx)(z.iF,{icon:H.z,children:"Flow Title"}),(0,r.jsx)(z.vM,{children:(0,r.jsx)("p",{className:"py-8 text-14",children:o})})]}),l.length>0&&(0,r.jsxs)(z.vz,{children:[(0,r.jsx)(z.iF,{icon:T.D,children:"Flow Patterns"}),(0,r.jsx)(z.vM,{children:(0,r.jsx)("ul",{className:"flex flex-row flex-wrap gap-8 py-[6px]",children:l.map((function(e,n){return(0,r.jsx)("li",{children:(0,r.jsx)(U.y,{text:e,href:"".concat(i,"?").concat(R([{category:"flowActions",value:e}])),intent:"apply_filter_for_flows"})},n)}))})})]}),(0,r.jsxs)(z.vz,{children:[(0,r.jsx)(z.iF,{icon:D.I,children:"Upload Date"}),(0,r.jsx)(z.vM,{children:(0,r.jsx)("p",{className:"py-8 text-14",children:"string"===typeof n?(0,W.Z)(new Date(n),"do MMMM yyyy"):"Unpublished"})})]})]})}function B(e){var n=(0,y._C)(),t=(0,a.useContext)(d);return t.isInspectorOpen?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden flex-shrink-0 flex-row min-720:flex",children:(0,r.jsxs)(M.s,{children:[(0,r.jsx)(M.H,{children:"Properties"}),(0,r.jsx)(q,(0,k.Z)({},e))]})}),(0,r.jsxs)(A.Vq,{open:n<720&&t.isInspectorOpen,onOpenChange:t.setIsInspectorOpen,children:[(0,r.jsx)(A.$N,{children:"Inspector"}),(0,r.jsxs)(A.a7,{noXPadding:!0,children:[(0,r.jsx)(q,(0,k.Z)({},e)),(0,r.jsx)("div",{className:"h-36"})]})]})]}):null}},98192:function(e,n,t){t.d(n,{i:function(){return l}});var r=t(85893),o=t(47562),i=t(65927),s=t(80617),c=t(87441);function l(e){var n=e.flowId,t=e.tooltipSide,l=void 0===t?"top":t,a=(0,c.c)({flowId:n});return(0,r.jsx)(i.u,{text:"Download all screens in flow",side:l,align:"center",children:(0,r.jsx)(o.z,{intent:"highlight",icon:s._,onClick:a.downloadScreensFromFlow,children:"Download"})})}},89385:function(e,n,t){t.d(n,{O:function(){return a}});var r=t(26042),o=t(69396),i=t(85893),s=t(11428),c=t(8336),l=t(6784);function a(e){var n=e.flowName,t=e.size,a=void 0===t?"default":t,u=e.appHeaderProps,d=e.preposition,p=e.children,f=(0,s._C)();return(0,i.jsxs)("div",{className:(0,c.A)("flex flex-row-reverse content-center items-center justify-end","gap-x-8","default"===a?"text-16":"text-24","font-semibold text-gray-200"),children:[void 0!==u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.t,(0,o.Z)((0,r.Z)({size:a},u),{iconOnly:f<720})),(0,i.jsx)("span",{children:"on"})]}),void 0!==p&&null!==p&&(0,i.jsxs)(i.Fragment,{children:[p,(0,i.jsx)("span",{children:d})]}),(0,i.jsx)("span",{className:"min-w-0 truncate text-black group-hover:underline peer-hover:no-underline",children:n})]})}},86430:function(e,n,t){t.d(n,{e:function(){return c}});var r=t(10253),o=t(67294),i=t(11428),s=t(38935);function c(e){var n=(0,r.Z)((0,s.T)("is_inspector_open",!1),2),t=n[0],c=n[1],l=(0,o.useState)(!1),a=l[0],u=l[1],d=(0,i._C)(),p=(0,o.useMemo)((function(){return d<720?a:t}),[t,a,d]),f=(0,o.useCallback)((function(e){d<720?u(e):c(e)}),[c,d]);return(0,o.useEffect)((function(){e||u(!1)}),[e]),[p,f]}}}]);
//# sourceMappingURL=999-c67f732ca26dfc48.js.map