"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2714],{48326:function(e,n,t){t.d(n,{K:function(){return r}});function r(e){var n=3*e.itemsPerRow;return!0===e.isLoading?{clampedItemCount:n,wasClamped:!1}:!0===e.shouldClamp?{clampedItemCount:Math.min(n,e.itemCount),wasClamped:n<e.itemCount}:!0===e.hasNextPage?{clampedItemCount:e.itemCount-e.itemCount%e.itemsPerRow,wasClamped:e.itemCount%e.itemsPerRow>0}:{clampedItemCount:e.itemCount,wasClamped:!1}}},306:function(e,n,t){t.d(n,{C:function(){return c}});var r=t(82670),o=t(99534),l=t(67294),i=t(78720),a=t(12297),s=t.n(a);function c(e){var n,t,r,a=e.itemsPerRow,c=e.gridGap,d=e.itemsCount,f=e.disableVirtualization,m=(0,o.Z)(e,["itemsPerRow","gridGap","itemsCount","disableVirtualization"]),p=Math.ceil(d/a),v="rowHeight"in m?m.rowHeight:0,w="itemHeights"in m?m.itemHeights:void 0;if(w&&1!==a)throw new Error("itemHeights can only be provided when itemsPerRow is set to 1");var g,h,x,I,C,y=null!==(r=document.scrollingElement)&&void 0!==r?r:document.documentElement,b=(0,l.useRef)(null),j=(0,i.o)({size:p,parentRef:(0,l.useRef)(y),estimateSize:(0,l.useCallback)((function(e){return w?(null!==(g=w[e])&&void 0!==g?g:0)+c:v+c}),[c,v,w]),keyExtractor:function(e){return"".concat(a,"-").concat(e)},onScrollElement:(0,l.useRef)(window),overscan:!0===f?Number.MAX_SAFE_INTEGER:0,scrollOffsetFn:function(){var e,n=null!==(e=null===y||void 0===y?void 0:y.scrollTop)&&void 0!==e?e:0,t=u(b.current);return Math.max(n-t,0)},scrollToFn:function(e){var n=u(b.current);y&&(y.scrollTop=n+e)}}),N=(0,l.useCallback)((function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(w?s()(w.slice(0,e))+e*c:(v+c)*Math.floor(e/a))+(null!==(n=t.offset)&&void 0!==n?n:0);j.scrollToOffset(r,t.align&&{align:t.align})}),[w,a,v,c,j]),P=null!==(h=null===(n=j.virtualItems[0])||void 0===n?void 0:n.index)&&void 0!==h?h:0,F=null!==(x=null===(t=j.virtualItems[j.virtualItems.length-1])||void 0===t?void 0:t.index)&&void 0!==x?x:0;w?(I=s()(w.slice(0,P))+P*c,C=Math.max(j.totalSize-c,0)):(I=P*(v+c),C=Math.max(p*v+(p-1)*c,0));var k=P*a,R=Math.min((F+1)*a,d),S={display:"grid",gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))"),alignContent:"start",gridGap:c,paddingTop:I,height:C};return{gridRef:b,style:S,scrollToIndex:N,startIndex:k,endIndex:R}}function u(e){for(var n=0,t=e;null!==t;){if(n+=t.offsetTop,null!==t.offsetParent&&!(0,r.Z)(t.offsetParent,HTMLElement))throw new TypeError("Expected `null` or `HTMLElement` but got `Element` instead.");t=t.offsetParent}return n}},95254:function(e,n,t){t.d(n,{L:function(){return o}});var r=t(38935);function o(){return(0,r.T)("is_curator_mode",!1)}},38050:function(e,n,t){t.d(n,{$_:function(){return R},AG:function(){return P},cn:function(){return S}});var r=t(82670),o=t(26042),l=t(99534),i=t(10253),a=t(85893),s=t(67294),c=t(23450),u=t.n(c),d=t(47562),f=t(99419),m=t(30846),p=t(8336),v=t(24555),w=t(95254),g=t(31516),h=t(27229),x=t(93927),I=t(81931),C=t(54943);function y(e){var n=e.appPlatform,t=e.allowImageInteraction,r=e.onClick,o=(0,l.Z)(e,["appPlatform","allowImageInteraction","onClick"]),i=(0,x.P)(n);return!0===o.loading?(0,a.jsx)(h.f,{ratio:"web"===n?C.YB:C.rM,className:"snap-start rounded-16 bg-gray-100",ref:i.screenRef}):(0,a.jsx)(h.f,{ratio:"web"===n?C.YB:C.rM,className:"snap-start",ref:i.screenRef,asChild:!0,children:void 0!==o.screenImageUrl&&(0,a.jsx)("a",{href:o.flowUrl,className:"group flex h-full w-full cursor-zoom-in",onClick:r,children:(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)("img",{src:(0,I.UH)(o.screenImageUrl,"web"===n?{width:1920,quality:100}:{}),alt:"".concat(o.appName," ").concat(o.flowName," screen"),className:(0,p.A)("h-full w-full","bg-gray-100 shadow-screen",t?"pointer-events-auto":"pointer-events-none","group-focus-visible:ring-4 group-focus-visible:ring-blue-200/50"),style:i.screenStyle})})})})}var b=s.forwardRef((function(e,n){var t,r=e.appPlatform,i=e.allowImageInteraction,c=e.onScreenClick,u=e.gridGap,d=e.visibleScreens,f=(e.screenWidth,e.setIsPrevButtonDisabled),m=e.setIsNextButtonDisabled,p=(0,l.Z)(e,["appPlatform","allowImageInteraction","onScreenClick","gridGap","visibleScreens","screenWidth","setIsPrevButtonDisabled","setIsNextButtonDisabled"]),v=!0===p.loading?Array.from({length:d},(function(){return""})):p.screenImageUrls,w=v.length,g=(0,s.useRef)(null);return(0,s.useLayoutEffect)((function(){var e=function(){if(null!==g.current&&!0!==p.loading){var e=g.current,n=e.scrollLeft,t=e.scrollWidth,r=e.clientWidth;f(0===n),m(n+r>=t)}};e();var n=g.current;return null===n||void 0===n||n.addEventListener("scroll",e),function(){return null===n||void 0===n?void 0:n.removeEventListener("scroll",e)}}),[m,f,p.loading,null===(t=g.current)||void 0===t?void 0:t.clientWidth]),(0,s.useImperativeHandle)(n,(function(){return{scrollCarousel:function(e){if(null!==g.current){var n=g.current,t=n.scrollLeft,r=(n.clientWidth-u*d)/(d-.4),o=Math.round(t/(r+u));g.current.scrollTo({left:(o+e)*(r+u),behavior:"smooth"})}}}})),(0,a.jsxs)("div",{ref:g,className:"scrollbar-none relative -m-4 grid select-none snap-x scroll-px-4 overflow-x-auto overscroll-x-contain p-4",style:{gridGap:u,gridTemplateColumns:"repeat(".concat(w,", calc((100% - (").concat(u,"px * ").concat(d-1,")) / ").concat(d-("web"===r?.7:.4),"))")},children:[(0,a.jsx)("a",{href:!0!==p.loading?p.flowUrl:"#",className:"absolute inset-0 col-start-1 col-end-[-1] row-start-1 cursor-zoom-in rounded-16",onClick:function(e){return null===c||void 0===c?void 0:c(e)}}),v.map((function(e,n){return(0,a.jsx)(y,(0,o.Z)({appPlatform:r,screenImageUrl:e,allowImageInteraction:i,onClick:function(e){return null===c||void 0===c?void 0:c(e,n)}},p),n)}))]})}));function j(e){var n=e.appPlatform,t=e.allowImageInteraction,r=e.gridGap,i=e.screensPerRow,s=e.onScreenClick,c=(0,l.Z)(e,["appPlatform","allowImageInteraction","gridGap","screensPerRow","onScreenClick"]),u=!0===c.loading?Array.from({length:i},(function(){return""})):c.screenImageUrls;return(0,a.jsx)("div",{className:"relative grid",style:{gridGap:r,gridTemplateColumns:"repeat(".concat(i,", minmax(0, 1fr))")},children:u.map((function(e,r){return(0,a.jsx)(y,(0,o.Z)({appPlatform:n,screenImageUrl:e,allowImageInteraction:t,onClick:function(e){return null===s||void 0===s?void 0:s(e,r)}},c),r)}))})}var N=t(89385),P=s.forwardRef((function(e,n){var t=e.id,c=e.variant,h=e.width,x=e.appPlatform,I=e.actionButtons,y=e.displayActionButtons,P=e.onClick,F=e.allowImageInteraction,k=void 0!==F&&F,R=(0,l.Z)(e,["id","variant","width","appPlatform","actionButtons","displayActionButtons","onClick","allowImageInteraction"]),S=(0,g.f)(),Z=(0,v.Z)(),U=(0,i.Z)((0,w.L)(),1)[0],A=(0,C.Wm)({contentWidth:h,appPlatform:x,layout:c,minItems:2}),L=A.gridGap,T=A.itemsPerRow,E=A.itemWidth,M=(0,s.useRef)(null),z=(0,s.useState)(!0),G=z[0],W=z[1],_=(0,s.useState)(!0),H=_[0],B=_[1];return(0,a.jsxs)("div",{ref:n,id:t,className:"group relative flex flex-col gap-20 min-720:gap-24",children:[!0===R.loading?(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)("div",{className:"h-32 w-[300px] rounded-8 bg-gray-100"}),(0,a.jsx)("div",{className:"col-span-4 row-start-2 h-24 w-[150px] rounded-8 bg-gray-100"})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between gap-x-16",children:[(0,a.jsxs)("a",{href:R.flowUrl,onClick:P,className:(0,p.A)("peer","flex h-64 grow flex-col gap-y-8","min-w-0","after:absolute after:-inset-12","after:rounded-28","after:ring-inset focus-visible:after:ring-4 focus-visible:after:ring-blue-200/50"),children:[(0,a.jsx)("div",{className:(0,p.A)("z-10",U&&!0===Z.data&&"group-hover:hidden"),children:void 0===R.flowNameSuffix?(0,a.jsx)(N.O,{flowName:R.flowName,size:"large",appHeaderProps:{onClick:function(e){return e.stopPropagation()},appUrl:R.appUrl,appName:R.appName,appPlatform:x,appLogoUrl:R.appLogoUrl}}):null!==R.flowNameSuffix?(0,a.jsx)(N.O,{flowName:R.flowName,size:"large",preposition:R.flowNamePreposition,children:R.flowNameSuffix}):(0,a.jsx)(N.O,{flowName:R.flowName,size:"large"})}),(0,a.jsx)("div",{className:(0,p.A)("col-span-3 text-16 text-gray-200",U&&!0===Z.data&&"group-hover:hidden"),children:u()("screen",R.screenImageUrls.length,!0)})]}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,p.A)("z-10 hidden","flex-shrink-0 flex-row items-center gap-x-8 min-720:flex","sr-only","focus-within:not-sr-only","group-hover:not-sr-only","peer-focus-within:not-sr-only peer-hover:not-sr-only peer-focus:not-sr-only",!0===y&&"!not-sr-only"),onClick:function(){var e=document.activeElement;(0,r.Z)(e,HTMLElement)&&e.blur()},children:I}),"carousel"===c&&(0,a.jsxs)("div",{className:"z-10 hidden min-720:flex",children:[(0,a.jsx)("div",{className:"pr-12",children:(0,a.jsx)("div",{className:"h-36 w-[2px] bg-gray-100 py-8"})}),(0,a.jsx)(d.z,{icon:f.w,intent:"minimal",onClick:function(){var e;return null===(e=M.current)||void 0===e?void 0:e.scrollCarousel(-1)},disabled:G}),(0,a.jsx)(d.z,{icon:m.X,intent:"minimal",onClick:function(){var e;return null===(e=M.current)||void 0===e?void 0:e.scrollCarousel(1)},disabled:H})]})]})]}),"carousel"===c?(0,a.jsx)(b,(0,o.Z)({ref:M,appPlatform:x,allowImageInteraction:k,gridGap:L,visibleScreens:T,screenWidth:E,onScreenClick:P,setIsPrevButtonDisabled:W,setIsNextButtonDisabled:B},R)):(0,a.jsx)(j,(0,o.Z)({appPlatform:x,allowImageInteraction:k,gridGap:L,screensPerRow:T,onScreenClick:P},R))]})})),F=t(11428),k=t(71743),R=719;function S(e){var n=e.contentWidth,t=e.appPlatform,r=(0,l.Z)(e,["contentWidth","appPlatform"]),o=(0,F._C)()<720,i=(0,k.W)({contentWidth:n,appPlatform:t,layout:r.layout,minItems:2}),a=i.itemsPerRow,c=i.width,u=i.rowHeight,d=64+(o?20:24),f="screenCounts"in r?r.screenCounts:void 0,m=(0,s.useMemo)((function(){return(null!==f&&void 0!==f?f:[]).map((function(e){var n=Math.ceil(e/a);return d+n*u+24*(n-1)}))}),[d,a,u,f,24]);return"carousel"===r.layout?{itemsPerRow:1,gridGap:24,rowHeight:d+u,width:c}:{itemsPerRow:1,gridGap:24,itemHeights:m,width:c}}},2714:function(e,n,t){t.d(n,{$W:function(){return R},mW:function(){return U},yd:function(){return A.y}});var r=t(26042),o=t(69396),l=t(85893),i=t(67294),a=t(306),s=t(79882),c=t(66308),u=t(10253),d=t(11163),f=t(47562),m=t(27419),p=t(65927),v=t(11428),w=t(99419),g=t(30846),h=t(31516),x=t(18740),I=t(81931),C=t(86430),y=t(42839);function b(e){var n={id:e.appId,platform:e.platform,name:e.appName};return"/apps/".concat((0,y.P)(n),"/_/flows")}var j=t(62916),N=t(89385);function P(e){var n,t,o,a=e.activeFlowId,s=e.flows,c=e.scrollToScreenIndex,y=e.onActiveFlowIdChange,P=e.filterPathname,F=(0,i.useMemo)((function(){var e,n,t=s.findIndex((function(e){return e.id===a})),r=s[t];return r?{prevFlow:null!==(e=s[t-1])&&void 0!==e?e:null,currentFlow:r,nextFlow:null!==(n=s[t+1])&&void 0!==n?n:null}:null}),[s,a]),k=(0,d.useRouter)(),R=(0,v._C)(),S=(0,h.f)(),Z=(0,u.Z)((0,C.e)(!F),2),U=Z[0],A=Z[1];return(0,l.jsxs)(m.x,{title:(null===F||void 0===F?void 0:F.currentFlow)&&(0,l.jsx)(N.O,{flowName:F.currentFlow.name,appHeaderProps:{appName:F.currentFlow.appName,appPlatform:F.currentFlow.platform,appUrl:b(F.currentFlow),appLogoUrl:F.currentFlow.appLogoUrl}}),startActionButtons:R>=720?(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsx)(p.u,{text:"Previous flow",keys:"\u2190",hide:!(null===F||void 0===F?void 0:F.prevFlow),children:(0,l.jsx)(f.z,{icon:w.w,intent:"minimal",disabled:!(null===F||void 0===F?void 0:F.prevFlow),onClick:function(){var e;return"string"===typeof(null===F||void 0===F||null===(e=F.prevFlow)||void 0===e?void 0:e.id)&&y(F.prevFlow.id)}})}),(0,l.jsx)(p.u,{text:"Next flow",keys:"\u2192",hide:!(null===F||void 0===F?void 0:F.nextFlow),children:(0,l.jsx)(f.z,{icon:g.X,intent:"minimal",disabled:!(null===F||void 0===F?void 0:F.nextFlow),onClick:function(){var e;return"string"===typeof(null===F||void 0===F||null===(e=F.nextFlow)||void 0===e?void 0:e.id)&&y(F.nextFlow.id)}})})]}):void 0,endActionButtons:null!==a&&(null===F||void 0===F?void 0:F.currentFlow)&&(0,l.jsx)(j._k,{platform:F.currentFlow.platform,flowId:a,variant:"header",isInspectorOpen:U,onIsInspectorOpenChange:A}),open:!!F,onOpenChange:function(e){return e||k.back()},children:[null===F||void 0===F||null===(n=F.prevFlow)||void 0===n?void 0:n.screens.map((function(e,n){return(0,l.jsx)("img",(0,r.Z)({className:"hidden",alt:""},(0,x.V)(e.screenUrl,S?{}:{width:I.Zi})),n)})),null===F||void 0===F||null===(t=F.nextFlow)||void 0===t?void 0:t.screens.map((function(e,n){return(0,l.jsx)("img",(0,r.Z)({className:"hidden",alt:""},(0,x.V)(e.screenUrl,S?{}:{width:I.Zi})),n)})),(null===F||void 0===F?void 0:F.currentFlow)&&a&&(0,l.jsxs)(j.Jt,{flowId:a,platform:F.currentFlow.platform,isInspectorOpen:U,onIsInspectorOpenChange:A,next:(null===F||void 0===F?void 0:F.nextFlow)&&{pathname:"/screens/".concat(F.nextFlow.id),onNavigate:function(){F.nextFlow&&y(F.nextFlow.id)}},prev:(null===F||void 0===F?void 0:F.prevFlow)&&{pathname:"/screens/".concat(F.prevFlow.id),onNavigate:function(){F.prevFlow&&y(F.prevFlow.id)}},children:[(0,l.jsx)(j.KK,{flowScreens:F.currentFlow.screens,onFlowClick:function(){return k.back()},scrollToScreenIndex:c,children:(0,l.jsx)(j.sl,{name:F.currentFlow.name,actions:null!==(o=F.currentFlow.actions)&&void 0!==o?o:[],publishedAt:F.currentFlow.appVersionPublishedAt,queryOnUrl:null!==P&&void 0!==P?P:b(F.currentFlow)})}),(0,l.jsx)(j._k,{variant:"footer"})]})]})}var F=t(38050),k=i.forwardRef((function(e,n){return(0,l.jsx)(F.AG,(0,o.Z)((0,r.Z)({},e),{ref:n}))}));function R(e){var n=e.flows,t=e.selectedFlowId,u=e.onSelectedFlowIdChange,d=e.modalActiveFlowId,f=e.modalActiveFlowScreenIndex,m=e.onModalActiveFlowChange,p=e.FlowCell,v=void 0===p?k:p,w=e.flowsGrid,g=e.disableVirtualization,h=e.filterPathname,x=(0,a.C)((0,o.Z)((0,r.Z)({itemsCount:w.clampedItemCount},w),{disableVirtualization:g})),I=(0,i.useMemo)((function(){return new Map(n.map((function(e,n){return[e.id,n]})))}),[n]),C=(0,s.A)(x.scrollToIndex),y=(0,i.useState)(w.layout),j=y[0],N=y[1],F=function(e,n,t){var r=(0,i.useRef)({}),o=(0,i.useRef)(null);return(0,i.useEffect)((function(){var l,i=e.map((function(e){return{ref:null!==(l=r.current[e.id])&&void 0!==l?l:null,id:e.id}})),a=new IntersectionObserver((function(e){var r,l=!0,a=!1,s=void 0;try{for(var c,u=function(e,n){var t=n.value,r=i.find((function(e){return e.ref===t.target}));r&&(r.observed=t)},d=e[Symbol.iterator]();!(l=(c=d.next()).done);l=!0)u(0,c)}catch(v){a=!0,s=v}finally{try{l||null==d.return||d.return()}finally{if(a)throw s}}var f=i.findIndex((function(e){return e.observed&&e.observed.boundingClientRect.top>0})),m=i[f],p=i[f-1];!0===(null===m||void 0===m||null===(r=m.observed)||void 0===r?void 0:r.isIntersecting)?(o.current=m.id,m.id!==n&&t(m.id)):p?(o.current=p.id,p.id!==n&&t(p.id)):(o.current=null,null!==n&&t(null))}),{rootMargin:"0% 0% -75% 0%"}),s=!0,c=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var m=d.value.ref;m&&a.observe(m)}}catch(p){c=!0,u=p}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}return function(){return a.disconnect()}}),[e,n,t]),{activeFlowIdRef:o,getFlowRef:function(e){return function(n){return r.current[e]=n}}}}((0,i.useMemo)((function(){return n.slice(x.startIndex,x.endIndex)}),[n,x]),null!==t&&void 0!==t?t:null,(function(e){j===w.layout&&(null===u||void 0===u||u(e))})),R=F.getFlowRef,S=F.activeFlowIdRef,Z=(0,i.useState)(!1),U=Z[0],A=Z[1];return(0,i.useEffect)((function(){if("string"===typeof t&&(U||t!==S.current||w.layout!==j)){A(!1);var e=I.get(t);void 0!==e&&(C.current(e,{align:"start",offset:-60}),N(w.layout))}}),[t,I,C,S,w.layout,j,U,A]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:w.gridContainerRef,className:"pb-24",children:(0,l.jsx)("div",{ref:x.gridRef,style:(0,r.Z)({width:w.width||void 0},x.style),children:!0===w.isLoading?Array.from({length:w.clampedItemCount}).slice(x.startIndex,x.endIndex).map((function(e,n){return(0,l.jsx)(v,{loading:!0,variant:w.layout,appPlatform:w.appPlatform,width:w.width},n)})):n.slice(x.startIndex,x.endIndex).map((function(e){return(0,l.jsx)(v,{ref:R(e.id),flowId:e.id,width:w.width,variant:w.layout,flowUrl:"/flows/".concat(e.id),flowName:e.name,flowActions:e.actions,selectableId:e.selectableId,id:e.name,appName:e.appName,parent:e.parent,scrollToFlow:function(){e.parent&&(A(!0),null===u||void 0===u||u(e.parent.id))},appUrl:b(e),appPlatform:e.platform,appLogoUrl:e.appLogoUrl,screenImageUrls:e.screens.map((function(e){return e.screenUrl})),onClick:function(n,t){c.aX.track("Flow Cell Clicked",{flow_id:e.id}),n.preventDefault(),m(e.id,null!==t&&void 0!==t?t:-1,"open")}},e.id)}))})}),(0,l.jsx)(P,{flows:n,activeFlowId:d,scrollToScreenIndex:f,filterPathname:h,onActiveFlowIdChange:function(e){return m(e,null,"navigate")}})]})}var S=t(78479);function Z(e){var n=e.onStartANewSearch;return(0,l.jsx)("div",{className:"flex grow items-center justify-center py-80",children:(0,l.jsxs)(S.qx,{children:[(0,l.jsx)(S.eq,{children:"No flows found"}),(0,l.jsx)(S.Dl,{children:"We couldn't find any flows matching your query. Try another query."}),n&&(0,l.jsx)(S.Ij,{onClick:n,children:"Start a new search"})]})})}function U(e){return 0===e.flows.length&&!0!==e.flowsGrid.isLoading?(0,l.jsx)(Z,(0,r.Z)({},e)):(0,l.jsx)(R,(0,r.Z)({},e))}var A=t(57045)},57045:function(e,n,t){t.d(n,{y:function(){return s}});var r=t(26042),o=t(69396),l=t(48326),i=t(22316),a=t(38050);function s(e){var n=(0,i.R)(a.$_),t=(0,a.cn)((0,r.Z)({contentWidth:n.width,appPlatform:e.appPlatform},"grid"===e.layout?{screenCounts:e.screenCounts,layout:e.layout}:{layout:e.layout})),s=(0,l.K)({itemsPerRow:1,itemCount:e.itemCount,isLoading:e.isLoading,hasNextPage:e.hasNextPage,shouldClamp:e.shouldClamp});return(0,o.Z)((0,r.Z)({},t),{gridContainerRef:n.ref,clampedItemCount:s.clampedItemCount,wasClamped:s.wasClamped,appPlatform:e.appPlatform,layout:e.layout,isLoading:e.isLoading})}}}]);
//# sourceMappingURL=2714-bf169efbb8a35bf8.js.map